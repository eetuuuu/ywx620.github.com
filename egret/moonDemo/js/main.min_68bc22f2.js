var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},__awaiter=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function s(t){try{h(i.next(t))}catch(e){r(e)}}function a(t){try{h(i["throw"](t))}catch(e){r(e)}}function h(t){t.done?n(t.value):new o(function(e){e(t.value)}).then(s,a)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function o(t){return function(e){return i([t,e])}}function i(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,r&&(s=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[0,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,r=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=e.call(t,h)}catch(i){o=[6,i],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},TextField=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.TextField);__reflect(TextField.prototype,"TextField");var Sprite=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(Sprite.prototype,"Sprite");var Shape=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Shape);__reflect(Shape.prototype,"Shape");var DisplayObject=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObject);__reflect(DisplayObject.prototype,"DisplayObject");var DisplayObjectContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(DisplayObjectContainer.prototype,"DisplayObjectContainer");var Point=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Point);__reflect(Point.prototype,"Point");var Rectangle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle");var Bitmap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var BitmapData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.BitmapData);__reflect(BitmapData.prototype,"BitmapData");var Stage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Stage);__reflect(Stage.prototype,"Stage");var Tween=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Tween);__reflect(Tween.prototype,"Tween");var trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o="",i=0;i<t.length;i++)o+=t[i]+",";o=o.substr(0,o.length-1),moon.showLog.getIns().logMessage(o)},traceSimple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o="",i=0;i<t.length;i++)o+=t[i]+",";o=o.substr(0,o.length-1),moon.showLog.getIns().log(o)},moon;!function(t){var e=function(){function t(){}return t.fontName="黑体",t}();t.FONT=e,__reflect(e.prototype,"moon.FONT");var o=function(){function t(){}return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.SHAPE_RECT="shape rect",t.SHAPE_RECT_ROUND="shape rect round",t.SHAPE_CIRCLE="shape circle",t}();t.Const=o,__reflect(o.prototype,"moon.Const");var i=function(){function t(){}return Object.defineProperty(t,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"white",{get:function(){return 16777215},enumerable:!0,configurable:!0}),Object.defineProperty(t,"black",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"gray",{get:function(){return 6710886},enumerable:!0,configurable:!0}),Object.defineProperty(t,"red",{get:function(){return 16711680},enumerable:!0,configurable:!0}),Object.defineProperty(t,"green",{get:function(){return 65280},enumerable:!0,configurable:!0}),Object.defineProperty(t,"bule",{get:function(){return 255},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinNormal",{get:function(){return 1382684},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinDown",{get:function(){return 10066329},enumerable:!0,configurable:!0}),Object.defineProperty(t,"titleBackground",{get:function(){return 2106923},enumerable:!0,configurable:!0}),t}();t.Color=i,__reflect(i.prototype,"moon.Color");var n=function(){function e(){}return Object.defineProperty(e,"randomRect",{get:function(){return t.MoonUI.getRect(60,60,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"randomCircle",{get:function(){return t.MoonUI.getCircle(50,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointNormal",{get:function(){return t.MoonUI.getCircle(6,t.Color.black)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointDown",{get:function(){return t.MoonUI.getCircle(6,t.Color.gray)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonNormal",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonDown",{get:function(){return t.MoonUI.getRect(60,60,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOff",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOn",{get:function(){return t.MoonUI.getRadioCircle(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOff",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOn",{get:function(){return t.MoonUI.getCheckBoxRect(t.Color.white,t.Color.black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOff",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOn",{get:function(){return t.MoonUI.getSwitch(t.Color.skinNormal,t.Color.white,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressBackground",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressValue",{get:function(){return t.MoonUI.getRect(300,20,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBackground",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderValue",{get:function(){return t.MoonUI.getRect(300,10,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBar",{get:function(){return t.MoonUI.getCircle(15,t.Color.white)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scrollBar",{get:function(){return t.MoonUI.getRect(10,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),e.getRodatioButton=function(e){var o=new y(t.Skin.radioOff,t.Skin.radioOn);return o.skinAutoScale=!1,o.label=e,o.labelColor=t.Color.black,o.setLabelPoint(40,0),o},e.getCheckBox=function(e){var o=[t.Skin.checkBoxOff,t.Skin.checkBoxOff,t.Skin.checkBoxOn,t.Skin.checkBoxOn],i=new t.MoreSkinButton(o);return i.skinAutoScale=!1,i.label=e,i.toggleSwitch=!0,i.labelColor=t.Color.black,i.setLabelPoint(50,2),i},e}();t.Skin=n,__reflect(n.prototype,"moon.Skin");var r=function(){function t(){}return t.displayRank=function(t,e,o,i,n,r,s){void 0===e&&(e=1),void 0===o&&(o=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1);for(var a,h=0;h<t.length;h++)a=t[h],a.x=n+Math.floor(h%e)*(a.width+o)*s,a.y=r+Math.floor(h/e)*(a.height+i)*s},t}();t.SimpleLayout=r,__reflect(r.prototype,"moon.SimpleLayout");var s=function(){function e(){}return Object.defineProperty(e,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),e.getRect=function(t,e,o,i,n){void 0===o&&(o=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=new Sprite;return r.graphics.beginFill(o),r.graphics.drawRect(i,n,t,e),r.graphics.endFill(),r},e.getRectAndX=function(t,e,o,i,n){void 0===o&&(o=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=this.getRect(t,e,o,i,n),s=new Sprite;s.graphics.lineStyle(.1),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);var a=new Sprite;return a.graphics.lineStyle(.1),a.graphics.moveTo(t,0),a.graphics.lineTo(0,e),r.addChild(s),r.addChild(a),r},e.getRoundRect=function(t,e,o,i,n,r,s){void 0===o&&(o=0),void 0===i&&(i=5),void 0===n&&(n=5),void 0===r&&(r=0),void 0===s&&(s=0);var a=new Sprite;return a.graphics.beginFill(o),a.graphics.drawRoundRect(r,s,t,e,i,n),a.graphics.endFill(),a},e.getCircle=function(t,e,o,i){void 0===e&&(e=0),void 0===o&&(o=0),void 0===i&&(i=0);var n=new Sprite;return n.graphics.beginFill(e),n.graphics.drawCircle(o,i,t),n.graphics.endFill(),n},e.getPolygon=function(t,e,o,i){void 0===t&&(t=3),void 0===e&&(e=10),void 0===o&&(o=0),void 0===i&&(i=0);var n=new Sprite;n.rotation=i,n.graphics.beginFill(o);for(var r=0;t>=r;r++){var s=Math.cos(r*(360/t)*Math.PI/180)*e,a=Math.sin(r*(360/t)*Math.PI/180)*e;0==r?n.graphics.moveTo(s,a):n.graphics.lineTo(s,a)}return n.graphics.endFill(),n},e.getArrowRoundRect=function(t,e,o,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=new Sprite;r.addChild(this.getRoundRect(t,e,o));var s=this.getPolygon(3,t/3,i,30+n);return s.x=r.width>>1,s.y=r.height>>1,r.addChild(s),r},e.getScrollLineBar=function(t,e,o){for(var i=new Sprite,n=e/3,r=0;3>r;r++){var s=this.getRect(t,1,o,0,r*n);i.addChild(s)}return i},e.getAddRoundRect=function(t,e,o){var i=new Sprite;i.addChild(this.getRoundRect(t,e,o));var n=this.getRect(t/2,2,0,t/4,e/2-1),r=this.getRect(2,e/2,0,t/2-1,e/4);return i.addChild(n),i.addChild(r),i},e.getRemoveRoundRect=function(t,e,o){var i=new Sprite;i.addChild(this.getRoundRect(t,e,o));var n=this.getRect(t/2,2,0,t/4,e/2-1);return i.addChild(n),i},e.getRoundRectText=function(t,e,o,i){void 0===i&&(i="click");var n=new Sprite;n.addChild(this.getRoundRect(t,e,o));var r=new TextField;return r.name="text",r.text=i,r.x=n.width-r.width>>1,r.y=n.height-r.height>>1,n.addChild(r),n},e.getSwitch=function(e,o,i){void 0===e&&(e=16777215),void 0===o&&(o=0),void 0===i&&(i=0);var n=t.MoonUI.getRoundRect(80,50,e,60,60);return n.addChild(t.MoonUI.getCircle(22,o,0==i?25:55,25)),n},e.getCheckBoxRect=function(t,e,o){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===o&&(o=0);var i=new Sprite;if(i.addChild(this.getRect(40,40,t)),1==o){var n=new Sprite;n.graphics.beginFill(e),n.graphics.moveTo(0,20),n.graphics.lineTo(20,36),n.graphics.lineTo(44,8),n.graphics.lineTo(36,0),n.graphics.lineTo(20,18),n.graphics.lineTo(12,8),n.graphics.lineTo(0,20),i.addChild(n)}return i},e.getRadioCircle=function(t,e,o){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===o&&(o=0);var i=new Sprite;if(i.addChild(this.getCircle(16,t,16,16)),i.graphics.lineStyle(1,0),1==o){var n=this.getCircle(8,e,16,16);i.addChild(n)}return i},e.getGridding=function(t,e){void 0===e&&(e=0);var o=new Sprite;o.graphics.lineStyle(.1,e);for(var i=t.width/t.x,n=t.height/t.y,r=0;r<t.x;r++)o.graphics.moveTo(0,r*n),o.graphics.lineTo(t.width,r*n);for(r=0;r<t.y;r++)o.graphics.moveTo(r*i,0),o.graphics.lineTo(r*i,t.height);return o},e}();t.MoonUI=s,__reflect(s.prototype,"moon.MoonUI");var a=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){var e=(new m).textField;e.textAlign=egret.HorizontalAlign.LEFT,t.addChild(e),this.txtSimple=e;var e=(new m).textField;e.size=25,t.addChild(e),this.txtMessage=e},t.prototype.log=function(t){this.txtSimple.text=t},t.prototype.logMessage=function(t){this.txtMessage.appendText(t+"\n")},t.prototype.setLogColor=function(t){this.txtSimple.textColor=t},t.prototype.setLogMessageColor=function(t){this.txtMessage.textColor=t},t}();t.showLog=a,__reflect(a.prototype,"moon.showLog");var h=function(){function e(){this.bgName="tips_png"}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.stage=t},e.prototype.simpleTips=function(e,o){null==this.tipsView&&(this.tipsView=new t.BasicTips(this.bgName),this.tipsView.setValue(e),this.stage.addChild(this.tipsView),this.setPosition(o),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this))},e.prototype.setPosition=function(t){t&&(this.tipsView.x=t.x-(this.tipsView.width>>1),this.tipsView.y=t.y-2*this.tipsView.height,this.tipsView.y<0&&(this.tipsView.y=t.y),this.tipsView.y+this.tipsView.height>this.stage.stageHeight&&(this.tipsView.y=t.y-(this.tipsView.height+50)),this.tipsView.x<0&&(this.tipsView.x=t.x+50),this.tipsView.x+this.tipsView.width>this.stage.stageWidth&&(this.tipsView.x=t.x-(this.tipsView.width+50)))},e.prototype.removeTips=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this);var t=this.tipsView.parent;null!=t&&(t.removeChild(this.tipsView),this.tipsView=null)},e}();t.TipsManager=h,__reflect(h.prototype,"moon.TipsManager");var c=function(t){function e(e,o,i){void 0===e&&(e=""),void 0===o&&(o=null),void 0===i&&(i=null);var n=t.call(this)||this;return n.type=e,n.data=o,n.currentTarget=i,n}return __extends(e,t),e.MOUSE_OVER="event-over",e.MOUSE_OUT="event-out",e.MOUSE_DOWN="event-down",e.MOUSE_MOVE="event-move",e.MOUSE_UP="event-up",e.CLICK="event-click",e.CHANGE="change",e.COMPLETE="complete",e.RENDER_COMPLETE="render complete",e.UPDATE="update",e.START="start",e.MOVE="move",e.OVER="over",e.PAUSE="pause",e.OPEN="open",e.CLOSE="close",e}(egret.EventDispatcher);t.MoonEvent=c,__reflect(c.prototype,"moon.MoonEvent");var l=function(t){function e(){var e=t.call(this)||this;return e._type=o.SHAPE_RECT,e._color=0,e.display=new Sprite,e.bg=new Sprite,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._data.c=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(t){this._data=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this._color=this._data.c,this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},e.prototype.setPosition=function(){this._hasBg&&this.type!=o.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},e.prototype.setBackground=function(t,e){void 0===e&&(e=1),this._hasBg=!0;var o=this._data,i={};for(var n in o)i[n]=o[n];i.c=t,i.w&&(i.w=i.w+2*e),i.h&&(i.h=i.h+2*e),i.r&&(i.r=i.r+e),this.bg.graphics.clear(),this.bg=this.getDisplay(i),this.addChildAt(this.bg,0),this.setPosition()},e.prototype.getDisplay=function(t){switch(this.type){case o.SHAPE_RECT:return s.getRect(t.w,t.h,t.c);case o.SHAPE_RECT_ROUND:return s.getRoundRect(t.w,t.h,t.c,t.ew,t.eh);case o.SHAPE_CIRCLE:return s.getCircle(t.r,t.c)}},e}(Sprite);t.MoonDisplayObject=l,__reflect(l.prototype,"moon.MoonDisplayObject");var u=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.render()},e.prototype.init=function(){},e.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},e.prototype.dispEvent=function(t,e,o){if(void 0===e&&(e=null),void 0===o&&(o=null),this.dataEvent){var i=this.dataEvent[t];if(null!=i){var n=new c;n.currentTarget=this,n.data=e,n.type=t,n.dataType=o,i["this"]?i.apply(i["this"],[n]):i(n)}}},e.prototype.addEvent=function(t,e,o){void 0===o&&(o=null),this.dataEvent&&null==this.dataEvent[t]&&(e["this"]=o,this.dataEvent[t]=e)},e.prototype.removeEvent=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e.prototype.removeFromParent=function(t){void 0===t&&(t=!1);var e=this.parent;t&&this.dispose(),e&&e.contains(this)&&e.removeChild(this),e=null},e.prototype.removeChildAll=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=2147483647),void 0===o&&(o=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var i=t;e>=i;++i)this.removeChildIndex(t,o)},e.prototype.removeChildIndex=function(t,o){if(t>=0||t<this.numChildren){var i=this.getChildAt(t);if(i instanceof e)i.removeFromParent(o);else{var n=this.getChildAt(t);n.parent&&n.parent.removeChild(n)}}},e.prototype.dispose=function(){this.removeChildAll(0,-1,!0),this.dataEvent=null},e}(DisplayObjectContainer);t.MoonContainer=u,__reflect(u.prototype,"moon.MoonContainer");var d=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.createText=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o="");var i=(new m).textField;return i.x=t,i.y=e,i.text=o,this.addChild(i),i},o.prototype.createRect=function(e,o,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var s=t.MoonUI.getRect(e,o,i,n,r);return this.addChild(s),s},o.prototype.createCircle=function(e,o,i,n){void 0===o&&(o=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=t.MoonUI.getCircle(e,o,i,n);return this.addChild(r),r},o.prototype.createRectBySprite=function(t,e,o,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),t.graphics.clear(),t.graphics.beginFill(i),t.graphics.drawRect(n,r,e,o),t.graphics.endFill()},o.prototype.createBackground=function(t,e,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=0),this.createRect(this.stageWidth,this.stageHeight,t,e,o)},o}(u);t.BasicView=d,__reflect(d.prototype,"moon.BasicView");var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.play=function(){egret.startTick(this.loop,this)},e.prototype.stop=function(){egret.stopTick(this.loop,this)},e.prototype.loop=function(t){return traceSimple(t),!0},e}(d);t.GameView=p,__reflect(p.prototype,"moon.GameView");var g=function(e){function o(t,o,i){void 0===i&&(i=-1);var n=e.call(this)||this;return n.rect=t,n.house=o,n.color=i,n}return __extends(o,e),o.prototype.render=function(){var e=this.house,o=t.MoonUI.getRect(this.rect.width,this.rect.height);o.alpha=.1,this.addChild(o);for(var i=this.rect.width/e.width,n=0,r=0;i>r;r++){var s=-1==this.color?16777215*Math.random():this.color,a=e.width+Math.random()*e.x,h=e.height+Math.random()*e.y,c=t.MoonUI.getRect(a,h,s);this.addChild(c),c.y=this.rect.height-c.height,c.x=n,n=c.x+c.width}},o}(u);t.MapHorizontalHouse=g,__reflect(g.prototype,"moon.MapHorizontalHouse");var f=function(t){function e(e,o){void 0===o&&(o=null);var i=t.call(this)||this;return i.texture=RES.getRes(e),i.scale9Grid=o||new Rectangle(8,8,2,2),i}return __extends(e,t),e}(Bitmap);t.Scale9Image=f,__reflect(f.prototype,"moon.Scale9Image");var v=function(t){function e(e){var o=t.call(this)||this;return o.side=14,o.lineSpacing=4,o.image=new f(e),o.addChild(o.image),o.text=(new m).textField,o.text.textAlign=egret.HorizontalAlign.CENTER,o.text.verticalAlign=egret.VerticalAlign.MIDDLE,o.text.lineSpacing=o.lineSpacing,o.addChild(o.text),o}return __extends(e,t),e.prototype.setValue=function(t){this.text.text=t,this.setCenter()},e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setCenter()},e.prototype.setCenter=function(){var t=this.image,e=this.text,o=this.side,i=e.width+o,n=e.height+o;t.width=i,t.height=n,e.x=e.y=o>>1},e}(u);t.BasicTips=v,__reflect(v.prototype,"moon.BasicTips");var m=function(e){function o(o,i){void 0===o&&(o=""),void 0===i&&(i=16777215);var n=e.call(this)||this;return n.text=new TextField,n.text.textAlign=egret.HorizontalAlign.LEFT,n.text.verticalAlign=egret.VerticalAlign.MIDDLE,n.text.text=o,n.text.textColor=i,n.text.fontFamily=t.FONT.fontName,n.addChild(n.text),n}return __extends(o,e),Object.defineProperty(o.prototype,"textField",{get:function(){return this.text},enumerable:!0,configurable:!0}),o}(u);t.Label=m,__reflect(m.prototype,"moon.Label");var y=function(t){function e(e,o){void 0===e&&(e=null),void 0===o&&(o=null);var i=t.call(this)||this;return i.skinAutoScale=!0,i.statusNormal=e||n.buttonNormal,i.statusDown=o||n.buttonDown,i.skinContainer=new DisplayObjectContainer,i.addChild(i.skinContainer),i.updateSkin(i.statusNormal),i.text=(new m).textField,i.addChild(i.text),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouch,i),i}return __extends(e,t),e.prototype.setLabelPoint=function(t,e){this.text.anchorOffsetX=0,this.text.anchorOffsetY=0,this.text.x=t,this.text.y=e},Object.defineProperty(e.prototype,"labelCircle",{set:function(t){this.text.text=t,this.skinAutoScale=!1,this.text.x=this.text.y=0,this.text.anchorOffsetX=this.text.textWidth>>1,this.text.anchorOffsetY=this.text.textHeight>>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelColor",{set:function(t){this.text.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.text.text},set:function(t){this.text.text=t;this.text.width+20;this.setSkinSize(),this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFild",{get:function(){return this.text},enumerable:!0,configurable:!0}),e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setSkinSize(),this.setTextPosition()},e.prototype.setSkinNormal=function(){this.updateSkin(this.statusNormal)},e.prototype.setSkinDown=function(){this.updateSkin(this.statusDown)},e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusDown)):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusNormal))},Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.text.width+20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.text.height+20},enumerable:!0,configurable:!0}),e.prototype.setSkinSize=function(){if(this.skinAutoScale&&""!=this.text.text){var t=this.textWidth/this.statusNormal.width;this.statusNormal instanceof Bitmap?(this.statusNormal.width=this.textWidth,this.statusDown.width=this.textWidth):this.statusNormal.scaleX=this.statusDown.scaleX=t;var e=this.textHeight;e>=this.statusNormal.height&&(t=e/this.statusNormal.height,this.statusNormal instanceof Bitmap?(this.statusNormal.height=this.textHeight,this.statusDown.height=this.textHeight):this.statusNormal.scaleY=this.statusDown.scaleY=t)}},e.prototype.setTextPosition=function(){this.text.anchorOffsetX=this.text.width>>1,this.text.anchorOffsetY=this.text.height>>1,this.textWidth>this.statusNormal.width?this.text.x=this.textWidth>>1:this.text.x=this.statusNormal.width>>1,this.textHeight>this.statusNormal.height?this.text.y=this.textHeight>>1:this.text.y=this.statusNormal.height>>1},e.prototype.updateSkin=function(t){this.skinContainer.removeChildren(),this.skinContainer.addChild(t)},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),t.prototype.dispose.call(this)},e}(u);t.BasicButton=y,__reflect(y.prototype,"moon.BasicButton");var _=function(t){function e(e){var o=t.call(this,e[0],e[1])||this;return o._currentPage=0,o.skins=e,o}return __extends(e,t),Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){t=2*t==this.skins.length?0:t,this._currentPage=t,this.statusNormal=this.skins[2*t],this.statusDown=this.skins[2*t+1],this.setSkinSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleSwitch",{set:function(t){this._toggleSwitch=t},enumerable:!0,configurable:!0}),e.prototype.onTouch=function(e){e.type==egret.TouchEvent.TOUCH_END&&this._toggleSwitch&&(this.currentPage=1-this.currentPage),t.prototype.onTouch.call(this,e)},e}(y);t.MoreSkinButton=_,__reflect(_.prototype,"moon.MoreSkinButton");var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=0,e}return __extends(e,t),e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){var e=this.items.indexOf(t);e>=0&&this.items.splice(e,1)},e.prototype.hasItem=function(t){return this.items.length>0&&(t>=0||t<this.items.length)},e.prototype.getItem=function(t){return this.items[t]},e.prototype.getNextItem=function(){return this.items[this.index++]},e.prototype.reset=function(){this.index=0},e.prototype.update=function(){},e.prototype.dispose=function(){for(this.reset();this.hasItem(this.index);){var t=this.getItem(this.index);this.removeItem(t),t instanceof u&&t.removeFromParent(!0)}},e}(d);t.BasicBar=w,__reflect(w.prototype,"moon.BasicBar",["moon.IItem"]);var C=function(t){function e(e,o){void 0===e&&(e=null),void 0===o&&(o=null);var i=t.call(this)||this;return i._value=0,i.setSkin(e,o),i.addChild(i.skinBg),i.addChild(i.skinValue),i.text=(new m).textField,i.addChild(i.text),i}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||n.progressBackground,this.skinValue=e||n.progressValue},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t},enumerable:!0,configurable:!0}),e.prototype.showText=function(t,e,o){void 0===e&&(e=-1),void 0===o&&(o=-1),this.text.text=t,-1==e?this.text.x=this.skinBg.width-this.text.width>>1:this.text.x=e,-1==o?this.text.y=this.skinBg.height+5:this.text.y=o},e}(u);t.ProgressBar=C,__reflect(C.prototype,"moon.ProgressBar");var T=function(t){function e(e,o,i){void 0===e&&(e=null),void 0===o&&(o=null),void 0===i&&(i=null);var r=t.call(this,e,o)||this;return r.skinBar=i||n.sliderBar,r.addChild(r.skinBar),r.skinBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onTouch,r),r.skinBar.touchEnabled=!0,r.layout(),r.value=1,r}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||n.sliderBackground,this.skinValue=e||n.sliderValue},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(c.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY),this.dispEvent(c.MOVE);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(c.OVER)}},e.prototype.moveDo=function(t,e){var i,n=this.globalToLocal(t,e);i=this.type==o.HORIZONTAL?n.x/this.skinValue.width:-n.y/this.skinValue.width,this.value=i},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t,this.type==o.HORIZONTAL?this.skinBar.x=this.skinValue.width*t:this.skinBar.y=-this.skinValue.width*t},enumerable:!0,configurable:!0}),e.prototype.layout=function(t,e){if(void 0===t&&(t=o.HORIZONTAL),void 0===e&&(e=0),this.type=t,t==o.VERTICAL){var i=-90;this.skinBar.x=this.skinValue.height>>1}else{var i=0;this.skinBar.y=this.skinValue.height>>1}this.skinBg.rotation=i,this.skinValue.rotation=i},e}(C);t.SliderBar=T,__reflect(T.prototype,"moon.SliderBar",["moon.ILayout"]);var E=function(t){function e(e){void 0===e&&(e=null);var o=t.call(this)||this;return o.skinBar=e||n.scrollBar,o.skinBar.alpha=0,o.addChild(o.skinBar),o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.onTouch,o),o.touchEnabled=!0,o.startPos=new Point,o.stPos=new Point,o.setSize(),o.layout(),o}return __extends(e,t),e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stPos.x=t.stageX,this.stPos.y=t.stageY,this.startPos.x=t.stageX-this._target.x,this.startPos.y=t.stageY-this._target.y,this.hideShow(1),this.startTime=egret.getTimer();break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.hideShow(0),this.timeMove(t.stageX,t.stageY)}},e.prototype.timeMove=function(t,e){},e.prototype.hideShow=function(t){Tween.removeTweens(this.skinBar),1==t&&(this.skinBar.alpha=1);var e=Tween.get(this.skinBar);e.to({alpha:t},1500)},e.prototype.moveDo=function(t,e){this.type==o.VERTICAL?this.canMoveY(e):this.type==o.HORIZONTAL&&this.canMoveX(t)},e.prototype.canMoveX=function(t){var e=this.maskRect.width-this._target.width,o=t-this.startPos.x;o>e&&0>o&&(this._target.x=o,this.skinBar.x=-o/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width))},e.prototype.canMoveY=function(t){var e=this.maskRect.height-this._target.height,o=t-this.startPos.y;o>e&&0>o&&(this._target.y=o,this.skinBar.y=-o/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height))},e.prototype.setMask=function(){null!=this.maskRect&&null!=this._target&&(this._target.mask=this.maskRect)},e.prototype.setSkinBarPos=function(){this.skinBar.x=this.skinBar.y=0,this.type==o.VERTICAL?this.skinBar.x=this.maskRect.width-this.skinBar.width:this.type==o.HORIZONTAL&&(this.skinBar.y=this.maskRect.height-this.skinBar.height)},e.prototype.layout=function(t,e){void 0===t&&(t=o.VERTICAL),void 0===e&&(e=0),this.type=t,this.setSkinBarPos()},e.prototype.setSize=function(t,e){void 0===t&&(t=200),void 0===e&&(e=200),this.maskRect=s.getRect(t,e),this.addChild(this.maskRect),this.setMask(),this.setSkinBarPos()},Object.defineProperty(e.prototype,"target",{set:function(t){this._target=t,this.addChildAt(this._target,0),this.setMask()},enumerable:!0,configurable:!0}),e}(u);t.ScrollBar=E,__reflect(E.prototype,"moon.ScrollBar",["moon.ILayout"]);var b=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=n.getCheckBox(t):e.label=t,this.addItem(e)},i.prototype.addItem=function(t){e.prototype.addItem.call(this,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(t)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.removeFromParent(!0)},i.prototype.onClick=function(e){e.currentTarget;this.dispEvent(t.MoonEvent.CHANGE)},i.prototype.layout=function(t,e){void 0===t&&(t=o.VERTICAL),void 0===e&&(e=50);for(var i=0;i<this.items.length;i++){var n=this.items[i];t==o.VERTICAL?n.y=e*i:n.x=e*i}},Object.defineProperty(i.prototype,"selectIndexs",{get:function(){for(var t=[],e=0;e<this.items.length;e++){var o=this.items[e];
1==o.currentPage&&t.push(e)}return t},enumerable:!0,configurable:!0}),i}(w);t.CheckBoxBar=b,__reflect(b.prototype,"moon.CheckBoxBar",["moon.ILayout"]);var x=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAutoLayout=!1,t}return __extends(o,e),o.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=n.getRodatioButton(t):e.label=t,this.addItem(e)},o.prototype.render=function(){this.update()},o.prototype.update=function(){var t;if(1==this.isAutoLayout)for(var e=0;e<this.items.length;e++)t=this.items[e],t.x=(t.width+10)*e},o.prototype.onClick=function(e){var o=e.currentTarget;this.selectIndex=this.items.indexOf(o),this.dispEvent(t.MoonEvent.CHANGE)},Object.defineProperty(o.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){function e(t){t.setSkinNormal()}this._selectIndex=t;var o=this.items[t];this.items.map(e,this),o.setSkinDown()},enumerable:!0,configurable:!0}),o}(b);t.RadioButtonBar=x,__reflect(x.prototype,"moon.RadioButtonBar");var B=function(e){function o(t,o){void 0===t&&(t=0),void 0===o&&(o=0);var i=e.call(this)||this;return i.titleHeight=60,i.pWidth=t,i.pHeight=t,i.titleBg=new Sprite,i.containerBg=new Sprite,i.title=(new m).textField,i.container=new u,i}return __extends(o,e),o.prototype.render=function(){0==this.pWidth&&0==this.pWidth?e.prototype.render.call(this):(this.stageWidth=this.pWidth,this.stageHeight=this.pHeight),this.createRectBySprite(this.titleBg,this.stageWidth,this.titleHeight,t.Color.titleBackground),this.createRectBySprite(this.containerBg,this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.addChild(this.titleBg),this.addChild(this.containerBg),this.title.anchorOffsetX=this.title.textWidth>>1,this.title.anchorOffsetY=this.title.textHeight>>1,this.title.x=this.stageWidth>>1,this.title.y=this.titleHeight>>1,this.addChild(this.title),this.container.y=this.titleHeight,this.addChild(this.container),this.containerMask=this.createRect(this.stageWidth,this.stageHeight-this.titleHeight,t.Color.white,0,this.titleHeight),this.container.mask=this.containerMask,this.dispEvent(c.RENDER_COMPLETE)},o.prototype.addItem=function(t,o,i){void 0===o&&(o=0),void 0===i&&(i=0),e.prototype.addItem.call(this,t),0!=o&&(t.x=o),0!=i&&(t.y=i),this.container.addChild(t)},o.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),this.container.contains(t)&&this.container.removeChild(t)},Object.defineProperty(o.prototype,"label",{get:function(){return this.title.text},set:function(t){this.title.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"colorTop",{set:function(t){var e=this.titleBg.width,o=this.titleBg.height;this.createRectBySprite(this.titleBg,e,o,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"colorBottom",{set:function(t){var e=this.containerBg.width,o=this.containerBg.height;this.createRectBySprite(this.containerBg,e,o,t,0,this.titleHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"windowRect",{get:function(){var t=new Rectangle(0,0,this.stageWidth,this.stageHeight);return t},enumerable:!0,configurable:!0}),o.prototype.removeAll=function(){this.container.dispose()},o}(w);t.PanelBar=B,__reflect(B.prototype,"moon.PanelBar");var S=function(e){function o(){var t=e.call(this)||this;return t.radioButton=new x,t.currentPage=0,t.posStartX=0,t.moveItems=[],t.container=new u,t.addChild(t.container),t.radioButton.isAutoLayout=!0,t}return __extends(o,e),o.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},o.prototype.close=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},o.prototype.update=function(){this.container.removeChildren();var e,o;if(this.items.length>0){var i=this.items[0];this.container.addChild(i),e=i.windowRect.width,o=i.windowRect.height,this.panelWidth=e}for(var n=this.items.length,r=0;n>r;r++){var s=new y(t.Skin.pointNormal,t.Skin.pointDown);this.radioButton.addItem(s)}s=this.radioButton.getItem(0),s.setSkinDown(),this.radioButton.x=e-22*n>>1,this.radioButton.y=o-20,this.addChild(this.radioButton)},o.prototype.render=function(){this.update(),this.items.length>1&&this.open()},o.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.posStartX=t.stageX,this.dispEvent(c.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.moveEnd(t.stageX)}},o.prototype.moveDo=function(t){var e=t-this.posStartX;if(Math.abs(e)>20){if(0==this.moveItems.length){var o=this.items[this.currentPage],i=this.panelWidth;this.moveItems.push(o),0==this.currentPage?(o=this.items[this.currentPage+1],this.container.addChild(o),o.x=i,this.moveItems.push(o)):this.currentPage==this.items.length-1?(o=this.items[this.currentPage-1],this.container.addChild(o),o.x=-i,this.moveItems.push(o)):(o=this.items[this.currentPage-1],this.container.addChild(o),o.x=-i,this.moveItems.push(o),o=this.items[this.currentPage+1],this.container.addChild(o),o.x=i,this.moveItems.push(o))}var n=0==this.currentPage&&e>0,r=this.currentPage==this.items.length-1&&0>e;n||r||(this.container.x=e)}},o.prototype.moveEnd=function(t){if(0==this.container.x)return void this.backCall(0);var e=t-this.posStartX,o=egret.Tween.get(this.container),i=this.panelWidth,n=this.panelWidth>>2;Math.abs(e)>n?(i=this.panelWidth,i*=e>0?1:-1):(e=0,i=0);var r=200;o.to({x:i},r),o.call(this.backCall,this,[e])},o.prototype.backCall=function(t){t>0?(this.currentPage--,this.currentPage=this.currentPage<0?0:this.currentPage):0>t&&(this.currentPage++,this.currentPage=this.currentPage==this.items.length?this.items.length-1:this.currentPage),this.container.removeChildren();var e=this.items[this.currentPage];e.x=0,this.container.addChild(e),this.radioButton.selectIndex=this.currentPage,this.moveItems.length=0,this.container.x=0,this.dispEvent(c.OVER)},o.prototype.dispose=function(){e.prototype.dispose.call(this),this.close()},o}(w);t.PanelMoreManager=S,__reflect(S.prototype,"moon.PanelMoreManager",["moon.IOnoff"])}(moon||(moon={}));var BView=function(t){function e(){return t.call(this,0,0)||this}return __extends(e,t),e.prototype.createCloseBtn=function(){var t=new moon.BasicButton;t.label="关闭",this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(t){this.dispEvent(moon.MoonEvent.CLOSE),this.removeFromParent(!0)},e}(moon.PanelBar);__reflect(BView.prototype,"BView");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return[4,this.loadResource()];case 1:return o.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=o.sent(),[4,platform.login()];case 3:return o.sent(),[4,platform.getUserInfo()];case 4:return e=o.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return o.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return o.sent(),this.stage.removeChild(t),[3,4];case 3:return e=o.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.addChild(new MainMoon)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var MainMoon=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=egret.Capabilities.isMobile;e&&(this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH),moon.TipsManager.getIns().init(this.stage),moon.showLog.getIns().init(this.stage),this.createBackground(16763904);for(var o=["基础组件","组件Progress","组件ScrollBar","游戏2048界面","画画"],i=0;i<o.length;i++){var n=new moon.BasicButton;n.label=o[i],n.name=i.toString(),n.x=this.stageWidth-n.width>>1,n.y=i*(n.height+20),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this),this.addChild(n)}this.father=this.parent},e.prototype.click=function(t){var e=t.currentTarget;this.removeFromParent();var o;switch(parseInt(e.name)){case 0:o=new MoonTest;break;case 1:o=new TestProgress;break;case 2:o=new TestScrollBar;break;case 3:o=new G2048;break;case 4:o=new Draw}this.father.addChild(o),o.addEvent(moon.MoonEvent.CLOSE,this.onClose,this)},e.prototype.onClose=function(t){this.father.addChild(this)},e}(moon.BasicView);__reflect(MainMoon.prototype,"MainMoon");var MoonTest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.panelMore=new moon.PanelMoreManager;var t=[];t.push("moon纯代码组件一，基本按钮展示"),t.push("moon纯代码组件二，进度条与滑动器展示"),t.push("moon纯代码组件三，TIPS展示"),t.push("moon纯代码组件四， MoonDisplay展示");for(var e=0;e<t.length;e++){var o=new moon.PanelBar;o.label=t[e],o.addEvent(moon.MoonEvent.RENDER_COMPLETE,this.onAddStage.bind(this)),this.panelMore.addItem(o)}this.panelMore.addEvent(moon.MoonEvent.START,this.start,this),this.panelMore.addEvent(moon.MoonEvent.OVER,this.over,this),this.addChild(this.panelMore),this.showButton(0),this.showProgresBar(1),this.showTipsBar(2),this.showMoonDisplay(3),this.createCloseBtn()},e.prototype.createCloseBtn=function(){var t=new moon.BasicButton;t.label="关闭",this.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(t){this.dispEvent(moon.MoonEvent.CLOSE),this.removeFromParent(!0)},e.prototype.addToStageMore=function(t){this.panelMore.close()},e.prototype.start=function(t){},e.prototype.over=function(t){},e.prototype.onAddStage=function(t){var e=t.currentTarget;e.colorBottom=16572284},e.prototype.showButton=function(t){function e(t){moon.TipsManager.getIns().simpleTips("选择了"+p.selectIndex,new Point(150,550))}function o(t){moon.TipsManager.getIns().simpleTips("选择了"+v.selectIndexs,new Point(300,550))}var i=this.panelMore.getItem(t),n=new moon.BasicButton;n.label="默认皮肤按钮",i.addItem(n,10,10);var r=moon.Skin.randomRect,s=moon.Skin.randomRect,n=new moon.BasicButton(r,s);n.label="随机颜色皮肤按钮",i.addItem(n,10,90);var r=moon.Skin.randomCircle,s=moon.Skin.randomCircle,n=new moon.BasicButton(r,s);n.labelCircle="圆按钮",i.addItem(n,100,220);var a=new moon.Scale9Image("btn1_png"),h=new moon.Scale9Image("btn2_png"),n=new moon.BasicButton(a,h);n.label="外部加载的皮肤",i.addItem(n,300,100);var a=new moon.Scale9Image("btn1_png"),h=new moon.Scale9Image("btn2_png");a.width=h.width=280,a.height=h.height=100;var n=new moon.BasicButton(a,h);n.skinAutoScale=!1,n.label="外部加载的皮肤",i.addItem(n,300,200);var r=moon.Skin.switchOn,s=moon.Skin.switchOn,c=moon.Skin.switchOff,l=moon.Skin.switchOff,u=new moon.MoreSkinButton([r,s,c,l]);u.toggleSwitch=!0,i.addItem(new moon.Label("toggleSwitch按钮",0),10,300),i.addItem(u,10,340);for(var d=["我帅","我很帅","我双酷双帅","我帅得惊动上帝"],p=new moon.RadioButtonBar,g=0;g<d.length;g++)p.addItemLabel(d[g]);p.layout(),i.addItem(new moon.Label("单选框按钮",0),10,500),i.addItem(p,10,540),p.addEvent(moon.MoonEvent.CHANGE,e.bind(this));for(var d=["A","B","C","D"],f=new moon.RadioButtonBar,g=0;g<d.length;g++)f.addItemLabel(d[g]);f.layout(moon.Const.HORIZONTAL,100),i.addItem(new moon.Label("单选框按钮横排版",0),10,800),i.addItem(f,10,840);for(var d=["我帅","我很帅","我双酷双帅","我帅得惊动上帝"],v=new moon.CheckBoxBar,m=d.length,g=0;m>g;g++)v.addItemLabel(d[g]);v.layout(),i.addItem(new moon.Label("复选框按钮",0),300,500),i.addItem(v,300,540),v.addEvent(moon.MoonEvent.CHANGE,o,this)},e.prototype.showProgresBar=function(t){function e(t){t.type==moon.MoonEvent.START?this.panelMore.close():t.type==moon.MoonEvent.MOVE||this.panelMore.open()}var o=this.panelMore.getItem(t),i=new moon.ProgressBar;i.value=.5,o.addItem(i,50,300);var n=Math.round(100*i.value)+"%";i.showText(n,-1,-40);var r=400,s=30,a=moon.MoonUI.getRect(r,s,moon.Color.random),h=moon.MoonUI.getRect(r,s,moon.Color.random),i=new moon.ProgressBar(a,h);o.addItem(i,100,50),i.value=.8;var n=Math.round(100*i.value)+"%";i.showText(n);var c=new moon.SliderBar;o.addItem(c,300,500),c.value=.2,c.addEvent(moon.MoonEvent.START,e,this),c.addEvent(moon.MoonEvent.MOVE,e,this),c.addEvent(moon.MoonEvent.OVER,e,this);var c=new moon.SliderBar;o.addItem(c,50,650),c.layout(moon.Const.VERTICAL),c.value=.2},e.prototype.showTipsBar=function(t){function e(t){var e=t.currentTarget;moon.TipsManager.getIns().simpleTips(e.label,new Point(t.stageX,t.stageY))}var o=this.panelMore.getItem(t),i=2,n=400,r=500;o.addItem(new moon.Label("单击按钮显示TIPS，TIPS显示始终都在屏幕内",0),10,100);for(var s=0;6>s;s++){var a=new moon.BasicButton;a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),a.label="单击显示TIPS"+s;var h=Math.floor(s%i)*n,c=Math.floor(s/i)*r;o.addItem(a,h,c)}},e.prototype.showMoonDisplay=function(t){var e=this.panelMore.getItem(t),o=new moon.MoonDisplayObject;o.type=moon.Const.SHAPE_RECT,o.data={w:100,h:100,c:moon.Color.random},e.addItem(o,100,100);var o=new moon.MoonDisplayObject;o.type=moon.Const.SHAPE_RECT_ROUND,o.data={w:100,h:100,c:moon.Color.random,ew:50,eh:50},e.addItem(o,100,300);var o=new moon.MoonDisplayObject;o.type=moon.Const.SHAPE_CIRCLE,o.data={r:50,c:moon.Color.random},e.addItem(o,100,600);var o=new moon.MoonDisplayObject;o.type=moon.Const.SHAPE_RECT,o.data={w:100,h:100,c:moon.Color.random},e.addItem(o,300,100),o.setBackground(moon.Color.random,10);var o=new moon.MoonDisplayObject;o.type=moon.Const.SHAPE_RECT_ROUND,o.data={w:100,h:100,c:moon.Color.random,ew:50,eh:50},e.addItem(o,300,300),o.setBackground(moon.Color.random,10);var o=new moon.MoonDisplayObject;o.type=moon.Const.SHAPE_CIRCLE,o.data={r:50,c:moon.Color.random},e.addItem(o,300,600),o.setBackground(moon.Color.random,10)},e}(moon.MoonContainer);__reflect(MoonTest.prototype,"MoonTest");var TestProgress=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="测试Progress",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.progressBar=new moon.ProgressBar,this.addChild(this.progressBar),this.progressBar.x=this.progressBar.y=100,egret.startTick(this.loop,this)},e.prototype.loop=function(){this.progressBar.value+=.002,this.progressBar.value=this.progressBar.value>=1?0:this.progressBar.value;var t=Math.round(100*this.progressBar.value)+"%";return this.progressBar.showText(t),!1},e.prototype.displose=function(){egret.stopTick(this.loop,this),t.prototype.dispose.call(this)},e}(BView);__reflect(TestProgress.prototype,"TestProgress");var TestScrollBar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="测试ScrollBar",t.prototype.render.call(this),this.colorBottom=4473924,this.createCloseBtn();var e=new moon.ScrollBar,o=new moon.Scale9Image("bg_jpg");e.target=o,e.setSize(400,400),e.layout(moon.Const.VERTICAL),this.addChild(e),e.x=e.y=100;var e=new moon.ScrollBar,o=new moon.Scale9Image("bg_jpg");e.target=o,e.setSize(400,400),e.layout(moon.Const.HORIZONTAL),this.addChild(e),e.x=100,e.y=550},e}(BView);__reflect(TestScrollBar.prototype,"TestScrollBar");var G2048=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){this.label="测试2048界面",t.prototype.render.call(this),this.colorBottom=16775406,this.createCloseBtn();var e=this.stageWidth-20,o=this.stageWidth-e>>1,i=this.createRoundRect(12430237,e,e);i.x=o,i.y=this.stageHeight-e-o,e=200,i=this.createRoundRect(15516672,e,e),i.x=o,i.y=this.stageHeight-e-3.3*e,this.createTextBySprite("2048",i,100),e=150;var n=i.y;i=this.createRoundRect(12364959,e+40,e),i.x=240,i.y=n,this.createTextBySprite("当前分:99",i,30),i=this.createRoundRect(12364959,e+40,e),i.x=440,i.y=n,this.createTextBySprite("最高分:999",i,30);var r=[15721947,15589835,15774589,15437395,15696232,16208945,16177005],s=[2,4,8,16,32,64,128];e=(this.stageWidth-60)/4;for(var a=[],h=0;16>h;h++){var c=Math.floor(Math.random()*r.length),l=r[c];i=this.createRoundRect(l,e,e),a.push(i),this.createTextBySprite(s[c],i)}moon.SimpleLayout.displayRank(a,4,5,5,20,520)},e.prototype.createRoundRect=function(t,e,o){var i=moon.MoonUI.getRoundRect(e,o,t,10,10);return this.addChild(i),i},e.prototype.createTextBySprite=function(t,e,o){void 0===o&&(o=80);var i=new moon.Label(t),n=i.textField;n.size=o,n.x=e.width-n.width>>1,n.y=e.height-n.height>>1,e.addChild(n)},e}(BView);__reflect(G2048.prototype,"G2048");var Draw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvasY=300,e.prevColor=0,e.color=0,e.size=1,e}return __extends(e,t),e.prototype.render=function(){this.label="测试画图",t.prototype.render.call(this),this.colorBottom=3355443,this.createCloseBtn(),this.createColors(),this.createCanvas(),this.createButtons(),this.createSliderBar(),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.createButtons=function(){for(var t=["铅笔","橡皮"],e=[],o=0;o<t.length;o++){var i=new moon.BasicButton;i.label=t[o],this.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.change,this),e.push(i)}moon.SimpleLayout.displayRank(e,2,5,5,400,200)},e.prototype.change=function(t){var e=t.currentTarget;"铅笔"==e.label?this.color=this.prevColor:this.color=moon.Color.white},e.prototype.createSliderBar=function(){var t=new moon.SliderBar;t.value=0,this.addChild(t),t.x=40,t.y=250,t.addEvent(moon.MoonEvent.MOVE,this.changeSize,this)},e.prototype.changeSize=function(t){var e=t.currentTarget;this.size=99*e.value+1},e.prototype.createColors=function(){for(var t=20,e=[],o=0;t>o;o++){var i=new moon.MoonDisplayObject;i.type=moon.Const.SHAPE_RECT_ROUND,i.data={w:40,h:40,c:moon.Color.random,ew:10,eh:10},i.setBackground(0,5),this.addChild(i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onColor,this),e.push(i)}moon.SimpleLayout.displayRank(e,10,5,5,20,80)},e.prototype.onColor=function(t){var e=t.currentTarget;this.color=e.color,this.prevColor=e.color},e.prototype.createCanvas=function(){var t=this.createRect(this.stage.stageWidth,this.stage.stageHeight-this.canvasY,moon.Color.white);t.y=this.canvasY,this.addChild(t),this.canvas=this.createRect(this.stage.stageWidth,this.stage.stageHeight,moon.Color.white),this.addChild(this.canvas),this.canvas.mask=t},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.posStart=new egret.Point(t.stageX,t.stageY),this.controlStart();break;case egret.TouchEvent.TOUCH_MOVE:this.posMove=new egret.Point(t.stageX,t.stageY),this.controlMove();break;case egret.TouchEvent.TOUCH_END:this.controlEnd()}},e.prototype.controlStart=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.canvas.graphics.lineStyle(this.size,this.color),this.canvas.graphics.moveTo(this.posStart.x,this.posStart.y)},e.prototype.controlMove=function(){this.canvas.graphics.lineTo(this.posMove.x,this.posMove.y)},e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.dispose=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),t.prototype.dispose.call(this)},e}(BView);__reflect(Draw.prototype,"Draw");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);